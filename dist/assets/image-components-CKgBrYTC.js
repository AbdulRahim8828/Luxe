import{r as e,j as t}from"./react-vendor-DyvEczVw.js";const s=[320,640,768,1024,1280,1920],a=({src:a,alt:r,width:i,height:n,className:o="",loading:c="lazy",priority:l=!1,sizes:d="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",objectFit:u="cover",threshold:m=.1,rootMargin:h="50px"})=>{const[g,x]=e.useState(!1),[j,p]=e.useState(!1),[f,v]=e.useState(l),b=e.useRef(null),y=e.useRef(null);e.useEffect(()=>{if(l||f)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(v(!0),e.disconnect())})},{threshold:m,rootMargin:h});return y.current&&e.observe(y.current),()=>e.disconnect()},[l,f,m,h]);const w=n/i*100,N=l?"eager":c,$=l?"high":"auto",z={cover:"object-cover",contain:"object-contain",fill:"object-fill",none:"object-none","scale-down":"object-scale-down"}[u],S=e=>{const t=a.replace("/assets/","").replace(/\.[^/.]+$/,"");return s.map(s=>`/assets/optimized/${t}-${s}w.${e} ${s}w`).join(", ")};return t.jsx("div",{ref:y,className:`relative overflow-hidden ${o}`,children:t.jsxs("div",{style:{paddingBottom:`${w}%`},className:"relative",children:[!g&&!j&&f&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-50 animate-pulse"})}),!f&&!l&&t.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:t.jsx("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-luxe-accent rounded-full animate-spin"})}),(f||l)&&t.jsxs("picture",{className:"absolute inset-0",children:[t.jsx("source",{srcSet:S("avif"),sizes:d,type:"image/avif"}),t.jsx("source",{srcSet:S("webp"),sizes:d,type:"image/webp"}),t.jsx("source",{srcSet:S("jpg"),sizes:d,type:"image/jpeg"}),t.jsx("img",{ref:b,src:a,alt:r,width:i,height:n,loading:N,decoding:"async",fetchPriority:$,onLoad:()=>{x(!0)},onError:()=>{p(!0)},className:`absolute inset-0 w-full h-full ${z} transition-opacity duration-500 ${g?"opacity-100":"opacity-0"}`})]}),j&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-2 bg-luxe-accent rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsx("p",{className:"text-sm text-gray-500 luxe-body",children:"Image not available"})]})})]})})};export{a as O};
